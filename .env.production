# =============================================================================
# MechaMap Realtime Server - FastPanel Production Configuration
# =============================================================================
#
# SETUP: VPS with FastPanel
# - realtime.mechamap.com → FastPanel Proxy → localhost:3000
# - SSL handled by FastPanel (Let's Encrypt)
# - WebSocket proxy enabled in FastPanel
# =============================================================================

# Server Configuration - FastPanel Setup
NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# Domain Configuration - Production Domain
DOMAIN=realtime.mechamap.com
PUBLIC_URL=https://realtime.mechamap.com

# SSL Configuration - DISABLED (FastPanel handles SSL termination)
SSL_ENABLED=false
# SSL handled by FastPanel proxy - no certificates needed here

# Proxy Configuration - IMPORTANT for FastPanel
TRUST_PROXY=true
PROXY_TIMEOUT=300000

# Database Configuration (MySQL) - Same as Laravel
DB_HOST=localhost
DB_PORT=3306
DB_NAME=mechamap_db
DB_USER=mechamap_user
DB_PASSWORD=YPF1Dt5JyTgxJ95R
DB_CONNECTION_LIMIT=20
DB_TIMEOUT=60000

# Redis Configuration (Optional)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_PREFIX=mechamap_realtime:

# JWT Configuration - SECURE SECRET
JWT_SECRET=cc779c53b425a9c6efab2e9def898a025bc077dec144726be95bd50916345e02d2535935490f7c047506c7ae494d5d4372d38189a5c4d8922a326d79090ae744
JWT_EXPIRES_IN=1h
JWT_ALGORITHM=HS256

# Laravel Integration (Production)
LARAVEL_API_URL=https://mechamap.com
LARAVEL_API_KEY=mechamap_ws_kCTy45s4obktB6IJJH6DpKHzoveEJLgrnmbST8fxwufexn0u80RnqMSO51ubWVQ3
LARAVEL_DB_CONNECTION=true

# CORS Configuration (Production) - Allow mechamap.com domains
CORS_ORIGIN=https://mechamap.com,https://www.mechamap.com,https://realtime.mechamap.com,http://mechamap.test,https://mechamap.test
CORS_CREDENTIALS=true

# Admin Configuration - SECURE KEY
ADMIN_KEY=admin_7107a9c6f0bc6a95c1e93d9585ae766c5879a53bf7578e16f5065f55141dab7a

# Rate Limiting - Production Security
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# WebSocket Configuration - Optimized for FastPanel Proxy
WS_PING_TIMEOUT=60000
WS_PING_INTERVAL=25000
WS_MAX_HTTP_BUFFER_SIZE=1e6
WS_TRANSPORTS=websocket,polling
WS_UPGRADE_TIMEOUT=10000
WS_ALLOW_UPGRADES=true

# Connection Limits - Production Scale
MAX_CONNECTIONS=5000
MAX_CONNECTIONS_PER_USER=5
CONNECTION_TIMEOUT=30000
HEARTBEAT_INTERVAL=25000

# Logging Configuration - Production Level
LOG_LEVEL=info
LOG_FILE=./logs/app.log
LOG_MAX_SIZE=50m
LOG_MAX_FILES=10
LOG_DATE_PATTERN=YYYY-MM-DD

# Monitoring & Health Checks
METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000
PROMETHEUS_METRICS=true

# Performance Tuning - Production Optimized (Single Process)
CLUSTER_ENABLED=false
CLUSTER_WORKERS=1
MEMORY_LIMIT=3072
GC_INTERVAL=600000

# Security - FastPanel Production Hardened
HELMET_ENABLED=true
COMPRESSION_ENABLED=true
TRUST_PROXY=true
SECURE_PROXY=true
PROXY_PROTOCOL=false

# Production Settings - Disable Development Features
DEBUG_MODE=false
VERBOSE_LOGGING=false
MOCK_LARAVEL_API=true

# Authentication Settings - Production Mode
DISABLE_AUTH=false
MOCK_USER_ID=
MOCK_USER_ROLE=
